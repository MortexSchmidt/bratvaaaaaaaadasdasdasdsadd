<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –î–µ–π—Å—Ç–≤–∏–µ 2.0</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div id="app">
        <header>
            <h1>–ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –î–µ–π—Å—Ç–≤–∏–µ</h1>
            <div class="theme-toggle" onclick="toggleTheme()">
                <span id="theme-icon">üåô</span>
            </div>
        </header>
        
        <main>
            <div id="welcome-screen" class="screen active">
                <div class="logo">
                    <div class="dice">üé≤</div>
                </div>
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É!</h2>
                <p>–°–æ–∑–¥–∞–π—Ç–µ –ª–æ–±–±–∏ –∏–ª–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç–µ—Å—å –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—É—é –∏–≥—Ä—É "–ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –î–µ–π—Å—Ç–≤–∏–µ".</p>
                
                <div class="progress-container">
                    <div class="progress-bar" id="welcome-progress"></div>
                </div>
                
                <div class="actions">
                    <button class="primary-btn" onclick="showCreateLobby()">
                        <span>–°–æ–∑–¥–∞—Ç—å –ª–æ–±–±–∏</span>
                    </button>
                    <button class="secondary-btn" onclick="showJoinLobby()">
                        <span>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</span>
                    </button>
                    <button class="tertiary-btn" onclick="showQuickGame()">
                        <span>–ë—ã—Å—Ç—Ä–∞—è –∏–≥—Ä–∞</span>
                    </button>
                </div>
            </div>
            
            <div id="create-lobby-screen" class="screen">
                <h2>–°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–±–±–∏</h2>
                <div class="form-group">
                    <label for="player-name">–í–∞—à–µ –∏–º—è:</label>
                    <input type="text" id="player-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" maxlength="30">
                </div>
                <div class="form-group">
                    <label>–†–µ–∂–∏–º –∏–≥—Ä—ã:</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="game-mode" value="clockwise" checked>
                            <span class="checkmark"></span>
                            <span>–ü–æ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–µ</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="game-mode" value="anyone">
                            <span class="checkmark"></span>
                            <span>–ö–æ–º—É —É–≥–æ–¥–Ω–æ</span>
                        </label>
                    </div>
                <div class="form-group">
                    <label>–†–µ–∂–∏–º –ø—Ä–∞–≤–∏–ª:</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="rules-mode" value="with" checked>
                            <span class="checkmark"></span>
                            <span>–° –ø—Ä–∞–≤–∏–ª–∞–º–∏</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="rules-mode" value="without">
                            <span class="checkmark"></span>
                            <span>–ë–µ–∑ –ø—Ä–∞–≤–∏–ª</span>
                        </label>
                    </div>
                <div class="form-group">
                    <label>–°–ª–æ–∂–Ω–æ—Å—Ç—å –∑–∞–¥–∞–Ω–∏–π:</label>
                    <select id="difficulty-setting">
                        <option value="all">–í—Å–µ —É—Ä–æ–≤–Ω–∏</option>
                        <option value="safe">–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ</option>
                        <option value="spicy">–û—Å—Ç—Ä—ã–µ</option>
                        <option value="risky">–†–∏—Å–∫–æ–≤–∞–Ω–Ω—ã–µ</option>
                    </select>
                </div>
                <div class="actions">
                    <button class="primary-btn" onclick="createLobby()">
                        <span>–°–æ–∑–¥–∞—Ç—å –ª–æ–±–±–∏</span>
                    </button>
                    <button class="secondary-btn" onclick="showWelcome()">
                        <span>–ù–∞–∑–∞–¥</span>
                    </button>
                </div>
            </div>
            
            <div id="join-lobby-screen" class="screen">
                <h2>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –ª–æ–±–±–∏</h2>
                <div class="form-group">
                    <label for="join-player-name">–í–∞—à–µ –∏–º—è:</label>
                    <input type="text" id="join-player-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" maxlength="30">
                </div>
                <div class="form-group">
                    <label for="lobby-code">–ö–æ–¥ –ª–æ–±–±–∏:</label>
                    <input type="text" id="lobby-code" placeholder="–í–≤–µ–¥–∏—Ç–µ 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥" maxlength="6">
                </div>
                <div class="actions">
                    <button class="primary-btn" onclick="joinLobby()">
                        <span>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</span>
                    </button>
                    <button class="secondary-btn" onclick="showWelcome()">
                        <span>–ù–∞–∑–∞–¥</span>
                    </button>
                </div>
            </div>
            
            <div id="lobby-screen" class="screen">
                <div class="lobby-header">
                    <h2>–õ–æ–±–±–∏</h2>
                    <div class="lobby-info">
                        <span id="lobby-code-display">–ö–æ–¥: ABC123</span>
                        <span id="player-count">–ò–≥—Ä–æ–∫–æ–≤: 1/8</span>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar" id="lobby-progress"></div>
                </div>
                
                <div class="players-list" id="players-list">
                    <!-- –ò–≥—Ä–æ–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    <div class="player-item host">
                        <span class="player-name">–í—ã (–°–æ–∑–¥–∞—Ç–µ–ª—å)</span>
                        <span class="host-badge">üëë</span>
                    </div>
                
                <div class="actions">
                    <button class="primary-btn" id="start-game-btn" onclick="startGame()" disabled>
                        <span>–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</span>
                    </button>
                    <button class="secondary-btn" onclick="copyLobbyCode()">
                        <span>–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</span>
                    </button>
                    <button class="tertiary-btn" onclick="leaveLobby()">
                        <span>–ü–æ–∫–∏–Ω—É—Ç—å</span>
                    </button>
                </div>
            </div>
            
            <div id="game-screen" class="screen">
                <div class="game-header">
                    <h2>–ò–≥—Ä–∞</h2>
                    <div class="game-info">
                        <span id="current-player">–•–æ–¥: –ò–≥—Ä–æ–∫ 1</span>
                        <span id="game-mode">–†–µ–∂–∏–º: –ü–æ —á–∞—Å–æ–≤–æ–π</span>
                    </div>
                
                <div class="progress-container">
                    <div class="progress-bar" id="game-progress"></div>
                </div>
                
                <div class="game-content">
                    <div class="question-card">
                        <h3>–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–¥–∞–Ω–∏–µ:</h3>
                        <div class="choices">
                            <button class="choice-btn truth" onclick="selectChoice('truth')">
                                <span class="icon">üí°</span>
                                <span class="label">–ü—Ä–∞–≤–¥–∞</span>
                            </button>
                            <button class="choice-btn dare" onclick="selectChoice('dare')">
                                <span class="icon">üé≠</span>
                                <span class="label">–î–µ–π—Å—Ç–≤–∏–µ</span>
                            </button>
                            <button class="choice-btn random" onclick="selectChoice('random')">
                                <span class="icon">üé≤</span>
                                <span class="label">–°–ª—É—á–∞–π–Ω–æ–µ</span>
                            </button>
                            <button class="choice-btn pass" onclick="selectChoice('pass')">
                                <span class="icon">‚è≠Ô∏è</span>
                                <span class="label">–ü–∞—Å</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–¥–∞–Ω–∏—è (—Å–∫—Ä—ã—Ç–∞ –¥–æ –≤—ã–±–æ—Ä–∞) -->
                    <div class="card-container" id="task-card-container" style="display: none;">
                        <div class="card" id="task-card">
                            <div class="card-front">
                                <h3>–ó–∞–¥–∞–Ω–∏–µ</h3>
                                <p>–ñ–¥–µ–º –≤—ã–±–æ—Ä–∞...</p>
                            </div>
                            <div class="card-back">
                                <h3>–ó–∞–¥–∞–Ω–∏–µ</h3>
                                <p id="task-content">–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–¥–∞–Ω–∏—è –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</p>
                            </div>
                        </div>
                    </div>
                
                <div class="players-grid" id="players-grid">
                    <!-- –ò–≥—Ä–æ–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
                
                <div class="actions">
                    <button class="secondary-btn" onclick="showLobby()">
                        <span>–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ª–æ–±–±–∏</span>
                    </button>
                    <button class="tertiary-btn" onclick="endGame()">
                        <span>–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É</span>
                    </button>
                </div>
            </div>
            
            <div id="task-selection-screen" class="screen">
                <h2>–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</h2>
                <p>–î–ª—è –∏–≥—Ä–æ–∫–∞: <span id="target-player-name">–ò–≥—Ä–æ–∫</span></p>
                
                <div class="form-group">
                    <label id="task-type-label">–í–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å –¥–ª—è "–ü—Ä–∞–≤–¥—ã":</label>
                    <textarea id="task-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –∑–∞–¥–∞–Ω–∏–µ –∑–¥–µ—Å—å..." rows="4"></textarea>
                </div>
                
                <div class="difficulty-selection">
                    <p>–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:</p>
                    <div class="difficulty-badges">
                        <span class="difficulty-badge difficulty-safe" onclick="setDifficulty('safe')">–ë–µ–∑–æ–ø–∞—Å–Ω–æ</span>
                        <span class="difficulty-badge difficulty-spicy" onclick="setDifficulty('spicy')">–û—Å—Ç—Ä–æ</span>
                        <span class="difficulty-badge difficulty-risky" onclick="setDifficulty('risky')">–†–∏—Å–∫–æ–≤–∞–Ω–Ω–æ</span>
                    </div>
                </div>
                
                <div class="actions">
                    <button class="primary-btn" onclick="sendTask()">
                        <span>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ</span>
                    </button>
                    <button class="secondary-btn" onclick="showGame()">
                        <span>–ù–∞–∑–∞–¥</span>
                    </button>
                </div>
            </div>
        </main>
        
        <div id="notification" class="notification">
            <span id="notification-text"></span>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>